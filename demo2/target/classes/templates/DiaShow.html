<!DOCTYPE html>
<html>
<head>
<script layout:fragment="script" th:inline="javascript">

		var lastKey=1;
		function getByValue(map, searchValue) {
     		  for (let [key, value] of map.entries()) {
     		    if (value === searchValue)
     		      return key;
     		  }
     		}
		
function showNextImage()
	{

		var beforeLast=0;
		const map = new Map(Object.entries(/*[[${images}]]*/));
		
		const iterator1 = map.values();
	
		while((beforeLast=iterator1.next().value)!= map.get(lastKey))
			{}
		
		lastKey=getByValue(map,iterator1.next().value);
		
		if(map.get(lastKey)){
		
		document.getElementById('container').innerHTML =
    		
    		lastKey+'</br>'
    		'<img src="data:image/jpeg;charset=utf-8;base64, '+map.get(lastKey)+'" alt="test"  id="bigImg" class="bigImgClass" />'+
    		'<button th:onclick="showNextImage()">next</button>';
    		
    	
    	
    		
	
	  
		}else{lastKey=getByValue(map,beforeLast);}
	}
	function setLastKey()
	{
		const map = new Map(Object.entries(/*[[${images}]]*/));
		
		const iterator1 = map.values();
	
		lastKey=getByValue(map,iterator1.next().value);
		
		document.getElementById('container').innerHTML ='success'+lastKey+'</br>'+
		
	'<button th:onclick="showNextImage()">next</button>';
	}
</script>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<div id="container">
<button th:onclick="setLastKey()">start</button>
	<button th:onclick="showNextImage()">next</button>
</div>
</body>
</html>